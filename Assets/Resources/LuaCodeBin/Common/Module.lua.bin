local gevent = require("Game/GEvent")
__G__ModuleTable = __G__ModuleTable or {}
function __G__ModuleTable.get_all_global_metatables()
    local mtList = {}
    local visited = {}
    local function traverseTable(t)
        if visited[t] then
            return
        end
        visited[t] = true
        if type(t) == "table" then
            table.insert(mtList, t)
        end
        local mt = getmetatable(t)
        if mt ~= nil then
            traverseTable(mt)
        end
        for k, v in pairs(t) do
            if type(v) == "table" then
                traverseTable(v)
            end
        end
    end
    traverseTable(_G)
    return mtList
end
function __G__ModuleTable.load_all_script()
    mtList = __G__ModuleTable.get_all_global_metatables()
    for i, mt in ipairs(mtList) do
        local init = mt['init']
        if type(init) == "function"  and init ~= nil and mt['is_init'] ~= true then
            init()
            mt['is_init'] = true
        end
    end
    local gevent  = require("Game/GEvent")
    gevent.trigger_event(gevent.AfterLoadAllScripts)
end
return __G__ModuleTable
